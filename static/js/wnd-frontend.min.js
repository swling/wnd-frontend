function wnd_in_view(a,t){var e={};e.top=$(window).scrollTop(),e.bottom=e.top+$(window).height();var s={};switch(s.top=$($(a)).offset().top,s.bottom=s.top+$($(a)).outerHeight(),t){case"bottom":return s.bottom<=e.bottom&&s.bottom>=e.top;case"top":return s.top<=e.bottom&&s.top>=e.top;case"both":default:return s.top>=e.top&&s.bottom<=e.bottom}}function getCookie(a){return document.cookie.length>0&&(c_start=document.cookie.indexOf(a+"="),-1!=c_start)&&(c_start=c_start+a.length+1,c_end=document.cookie.indexOf(";",c_start),-1==c_end&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end)))}function setCookie(a,t,e,s="/"){if(e=e?1e3*e:0,!e)return!1;var n="",i=new Date;i.setTime(i.getTime()+e),n="; expires="+i.toGMTString(),document.cookie=a+"="+escape(t)+n+"; path="+s}function wnd_is_mobile(){return!!navigator.userAgent.match(/(iPhone|iPad|iPod|Android|ios|App\/)/i)}function wnd_is_spider(){var a=navigator.userAgent;return!!a.match(/(Googlebot|Baiduspider|spider)/i)}function wnd_alert_modal(a,t=!1){wnd_reset_modal(),t?$(".modal").addClass("is-active wnd-gallery"):($(".modal").addClass("is-active"),$(".modal-entry").addClass("box")),$(".modal-entry").html(a)}function wnd_alert_msg(a,t=0){if(wnd_reset_modal(),$(".modal").addClass("is-active"),$(".modal-entry").removeClass("box"),$(".modal-entry").html('<div class="alert-message has-text-white has-text-centered">'+a+"</div>"),t>0){var e=null;e=setInterval(function(){clearInterval(e),wnd_reset_modal()},1e3*t)}}function wnd_ajax_msg(a,t="is-danger",e="body",s=0){if($(e+" .ajax-message:first").html('<div class="message '+t+'"><div class="message-body">'+a+"</div></div>"),s>0){var n=null;n=setInterval(function(){clearInterval(n),$(e+" .ajax-message:first").empty()},1e3*s)}}function wnd_reset_modal(){$("#modal").length?($("#modal").removeClass("is-active wnd-gallery"),$("#modal .modal-entry").removeClass("box"),$("#modal .modal-entry").empty()):$("body").append('<div id="modal" class="modal"><div class="modal-background"></div><div class="modal-content"><div class="modal-entry content"></div></div><button class="modal-close is-large" aria-label="close"></button></div>')}function wnd_click(a){$(a).trigger("click")}function wnd_confirm_form_submit(a,t=""){wnd_alert_modal("<p>"+t+'</p><div class="field is-grouped is-grouped-centered"><div class="control"><button class="button is-dark"  onclick="wnd_ajax_submit(\''+a+"')\" >"+wnd.msg.confirm+"</button></div></div>")}function wnd_ajax_modal(a,t=0){$.ajax({type:"GET",url:wnd_interface_api,data:{module:a,param:t,ajax_type:"modal"},beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",wnd.rest_nonce),wnd_alert_msg("……")},success:function(a){wnd_reset_modal(),0!=a.status?wnd_alert_modal(a.data):wnd_alert_modal(a.msg)},error:function(){wnd_alert_msg(wnd.msg.system_error)}})}function wnd_ajax_embed(a,t,e=0){$.ajax({type:"GET",url:wnd_interface_api,data:{module:t,param:e,ajax_type:"embed"},beforeSend:function(t){t.setRequestHeader("X-WP-Nonce",wnd.rest_nonce),wnd_loading(a,!0)},success:function(t){wnd_loading(a,!1),0!=t.status?$(a).html(t.data):$(a).html(t.msg)},error:function(){$(a).html(wnd.msg.system_error)}})}function wnd_get_json(a,t,e=0){$.ajax({type:"GET",url:wnd_jsonget_api,data:{data:a,param:e},beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",wnd.rest_nonce)},success:function(a){window[t](a)},error:function(){return{status:0,msg:"Error",data:""}}})}function wnd_ajax_form_msg(a,t,e){var s=$("#"+a+" .ajax-message:first"),n=!!$("#"+a).closest(".modal.is-active").length;n||wnd_in_view(s,"bottom")?wnd_ajax_msg(t,e,"#"+a):wnd_alert_msg('<div class="message '+e+'"><div class="message-body">'+t+"</div></div>")}function wnd_loading(a,t){t?($(a).css({position:"relative"}),$(a).append('<div class="wnd-loading" style="position:absolute;top:0;left:0;right:0;bottom:0;z-index:999;background:#FFF;opacity:0.7"></div>')):($(a+" .wnd-loading").remove(),$(a).css({position:"initial"}))}function wnd_ajax_submit(a){var t=$("#"+a).prop("method"),e="post"==t?wnd_action_api:wnd_interface_api,s=$("#"+a+" [type='submit']"),n=!0;$("#"+a+" input").each(function(){if($(this).prop("disabled"))return!0;$(this).prop("required")&&(""==$(this).val()&&(n=!1,$(this).addClass("is-danger")),"radio"!=$(this).attr("type")&&"checkbox"!=$(this).attr("type")||$("[name="+$(this).attr("name")+"]:checked").length<=0&&(n=!1,$(this).addClass("is-danger")))});var i=!0;$("#"+a+' select:not(":disabled") option:selected').each(function(){if(i=$(this).val(),$(this).parent().prop("required")&&"-1"==i)return i=!1,$("#"+a+" select").addClass("is-danger"),!1});var d=!0;if($("#"+a+" textarea").each(function(){if($(this).prop("disabled"))return!0;$(this).prop("required")&&""==$(this).val()&&(d=!1,$(this).addClass("is-danger"))}),!1===n||!1===i||!1===d)return wnd_ajax_form_msg(a,wnd.msg.required,"is-warning"),!1;if($(".wp-editor-area").length>0){var o,r=$(".wp-editor-area").attr("id"),l=tinyMCE.get(r);o=l?l.getContent():$("#"+r).val(),$("#"+r).val(o)}var c="post"==t?new FormData($("#"+a).get(0)):$("#"+a).serialize();$.ajax({url:e,dataType:"json",cache:!1,contentType:!1,processData:!1,data:c,type:t,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",wnd.rest_nonce),s.addClass("is-loading")},success:function(e){if("get"==t)return e.status>=1?wnd_alert_modal(e.data):wnd_alert_modal(e.msg),void s.removeClass("is-loading");3!=e.status&&4!=e.status&&s.removeClass("is-loading"),3!=e.status&&4!=e.status&&8!=e.status||s.prop("disabled",!0);var n=e.status>0?"is-success":"is-danger";switch(e.status){case 1:case 8:wnd_ajax_form_msg(a,e.msg,n);break;case 2:var i=wnd.msg.submit_successfully+'<a href="'+e.data.url+'" target="_blank">&nbsp;'+wnd.msg.view+"</a>";wnd_ajax_form_msg(a,i,n);break;case 3:wnd_ajax_form_msg(a,wnd.msg.waiting,n),$(window.location).prop("href",e.data.redirect_to);break;case 4:if(wnd_ajax_form_msg(a,e.msg,n),void 0===e.data||void 0===e.data.waiting)return void window.location.reload(!0);var d=null,o=e.data.waiting;s.removeClass("is-loading"),s.text(wnd.msg.waiting+" "+o),d=setInterval(function(){o<=0?(clearInterval(d),wnd_reset_modal(),window.location.reload(!0)):(s.text(wnd.msg.waiting+" "+o),o--)},1e3);break;case 5:wnd_alert_msg(e.msg,1);break;case 6:wnd_ajax_form_msg(a,wnd.msg.downloading,n),$(window.location).prop("href",e.data.redirect_to);break;case 7:$("#"+a).replaceWith(e.data);break;default:wnd_ajax_form_msg(a,e.msg,n)}},error:function(){wnd_ajax_form_msg(a,wnd.msg.system_error,"is-danger"),s.removeClass("is-loading"),s.text(wnd.msg.system_error),s.prop("disabled",!0)}})}function wnd_ajax_update_views(a,t=3600){if(!wnd_is_spider()){for(var e=Date.parse(new Date)/1e3,s=localStorage.getItem("wnd_views")?JSON.parse(localStorage.getItem("wnd_views")):[],n=10,i=!0,d=0;d<s.length;d++)if(s[d].post_id==a){if(s[d].timestamp<e-t){s[d].timestamp=e;i=!0}else i=!1;break}if(i){var o={post_id:a,timestamp:e};s.unshift(o)}s.length>n&&(s.length=n),i&&$.ajax({type:"POST",datatype:"json",url:wnd_action_api,data:{param:a,action:"wnd_safe_action",method:"update_views",_ajax_nonce:wnd.safe_action_nonce},beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",wnd.rest_nonce)},success:function(a){1===a.status&&localStorage.setItem("wnd_views",JSON.stringify(s))}})}}function wnd_send_code(a){var t=a.closest("form").attr("id"),e=a.data();e.action="wnd_send_code";var s=a.closest(".validate-field-wrap").find("input[name='phone']").val(),n=a.closest(".validate-field-wrap").find("input[name='_user_user_email']").val();if(e.device=n||s,!e.device)return wnd_ajax_msg(wnd.msg.required,"is-warning","#"+t),!1;$.ajax({type:"post",dataType:"json",url:wnd_action_api,data:e,beforeSend:function(t){t.setRequestHeader("X-WP-Nonce",wnd.rest_nonce),a.addClass("is-loading")},success:function(s){if(s.status<=0)var n="is-danger";else{n="is-success";a.prop("disabled",!0),a.text(wnd.msg.send_successfully);var i=e.interval,d=null;d=setInterval(function(){i<=1?(clearInterval(d),$(a).text(wnd.msg.try_again),$(a).prop("disabled",!1)):(i--,$(a).text(i).fadeTo("slow",1))},1e3)}wnd_ajax_msg(s.msg,n,"#"+t),a.removeClass("is-loading")},error:function(){wnd_ajax_msg(wnd.msg.send_failed,"is-danger","#"+t),a.removeClass("is-loading")}})}var $=jQuery.noConflict(),lang_query=wnd.lang?"?lang="+wnd.lang:"",wnd_interface_api=wnd.root_url+wnd.interface_api+lang_query,wnd_action_api=wnd.root_url+wnd.action_api+lang_query,wnd_posts_api=wnd.root_url+wnd.posts_api+lang_query,wnd_users_api=wnd.root_url+wnd.users_api+lang_query,wnd_jsonget_api=wnd.root_url+wnd.jsonget_api+lang_query;jQuery(document).ready(function(a){a("body").on("change","[type='file']",function(){if("ajax"==a(this).data("method")){var t=a(this).data("id"),e=new FormData,s=a(this).val().split("\\").pop();s=s.substring(0,s.lastIndexOf("."));for(var n=0;n<a(this).get(0).files.length;++n)e.set("wnd_file["+n+"]",a(this).prop("files")[n]);for(key in a(this).data())e.set(key,a(this).data(key));var i=a(this).data("meta_key"),d=a(this).data("is_image"),o=a(this).data("thumbnail_width"),r=a(this).data("thumbnail_height");e.set("_ajax_nonce",a(this).data("upload_nonce")),e.set("action","wnd_upload_file");var l=a(this);a.ajax({url:wnd_action_api,dataType:"json",cache:!1,contentType:!1,processData:!1,data:e,type:"POST",beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",wnd.rest_nonce),wnd_ajax_msg(wnd.msg.waiting,"is-warning","#"+t)},success:function(e){if(l.val(""),0===e.status)return wnd_ajax_msg(e.msg,"is-danger","#"+t),!1;for(var n=0,c=e.length;n<c;n++)if(0!==e[n].status){if(wnd_ajax_msg(wnd.msg.upload_successfully,"is-success","#"+t),"gallery"==i){a("#"+t+" .gallery .default-message").remove();var _='<div class="column is-narrow attachment-'+e[n].data.id+'"><a><img class="thumbnail" src="'+e[n].data.thumbnail+'" data-url="'+e[n].data.url+'" width="'+o+'" width="'+r+'"></a><a class="delete" data-id="'+t+'" data-file_id="'+e[n].data.id+'"></a></div>';a("#"+t+" .gallery").prepend(_)}else 1==d?(a("#"+t+" .thumbnail").prop("src",e[n].data.thumbnail),a("#"+t+" .delete").data("file_id",e[n].data.id)):(a("#"+t+" .file-name").html(wnd.msg.upload_successfully+'&nbsp<a href="'+e[n].data.url+'" target="_blank">'+wnd.msg.view+"</a>"),a("#"+t+" .delete").data("file_id",e[n].data.id));var m=l.closest("form");m.length>0&&"attachment"==m.find("input[name='_post_post_type']").val()&&(m.find("input[name='_post_ID']").val(e[n].data.id),m.find("input[name='_post_post_title']").val()||m.find("input[name='_post_post_title']").val(s),m.find("input[name='_post_post_name']").val()||m.find("input[name='_post_post_name']").val(e[n].data.post.post_name),m.find("input[name='_post_menu_order']").val()||m.find("input[name='_post_menu_order']").val(e[n].data.post.menu_order),l.prop("disabled",!0),wnd_ajax_msg(wnd.msg.upload_successfully,"is-success","#"+t),wnd_ajax_submit(m.attr("id")))}else wnd_ajax_msg(e[n].msg,"is-danger","#"+t)},error:function(){wnd_ajax_msg(wnd.msg.system_error,"is-danger","#"+t)}})}}),a("body").on("click",".upload-field .delete",function(){if(!confirm(wnd.msg.confirm))return!1;var t=a(this).data("id"),e=a(this).data("file_id");if(!e)return wnd_ajax_msg(wnd.msg.system_error,"is-danger","#"+t),!1;var s=new FormData;for(key in s.set("file_id",e),file_data=a("#"+t+" [type='file']").data(),file_data)s.set(key,file_data[key]);var n=file_data.meta_key,i=file_data.is_image,d=file_data.thumbnail;s.set("_ajax_nonce",file_data.delete_nonce),s.set("action","wnd_delete_file"),a.ajax({url:wnd_action_api,dataType:"json",cache:!1,contentType:!1,processData:!1,data:s,type:"post",beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",wnd.rest_nonce),wnd_ajax_msg(wnd.msg.waiting,"is-warning","#"+t)},success:function(s){if(0===s.status)return wnd_ajax_msg(s.msg,"is-danger","#"+t),!1;wnd_ajax_msg(wnd.msg.deleted,"is-success","#"+t),a("#"+t+" [type='file']").prop("disabled",!1),a(".attachment-"+e).remove(),"gallery"==n?""==a("#"+t+" .gallery").html()&&a("#"+t+" .gallery").html('<div class="column default-message"><p>'+wnd.msg.deleted+"</p></div>"):1==i?(a("#"+t+" .thumbnail").prop("src",d),a("#"+t+" .delete").data("file_id",0)):(a("#"+t+" .file-name").text(wnd.msg.deleted),a("#"+t+" .delete").data("file_id",0))},error:function(){wnd_ajax_msg(wnd.msg.system_error,"is-danger","#"+t)}})});var t=!0;a("body").on("click",".ajax-link",function(){var e=!!a(this).closest(".modal.is-active").length;if(t)if(t=!1,setTimeout(function(){t=!0},1e3),1!=a(this).data("disabled")){var s=a(this).data("is-cancel"),n=s?a(this).data("cancel"):a(this).data("action"),i=s?a(this).data("cancel-nonce"):a(this).data("action-nonce"),d=a(this).data("sign"),o=a(this);a.ajax({type:"POST",url:wnd_action_api,data:{action:n,param:a(this).data("param"),_ajax_nonce:i,_wnd_sign:d},beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",wnd.rest_nonce)},success:function(t){switch(0!=t.status&&n==o.data("action")?o.data("cancel")?o.data("is-cancel",1):o.data("disabled",1):o.data("is-cancel",0),t.status){case 1:o.html(t.data);break;case 2:t.data&&o.html(t.data),e||wnd_alert_msg(t.msg,1);break;case 3:wnd_alert_msg(wnd.msg.waiting),a(window.location).prop("href",t.data.redirect_to);break;case 4:wnd_reset_modal(),window.location.reload(!0);break;default:o.html(t.data),e||wnd_alert_msg(t.msg,1)}},error:function(){wnd_alert_msg(wnd.msg.system_error)}})}else wnd_alert_msg(wnd.msg.waiting,1)});var e={};a("body").on("click",".ajax-filter a,.ajax-filter form button",function(){var t=a(this).closest(".ajax-filter").attr("ID").split("-")[1],s=a("#tabs-"+t),n="",i="",d=s.data();e=Object.assign(e,d);var o=a(this).closest(".pagination-list").length>0;if(o||delete e.page,"BUTTON"==a(this).get(0).tagName){var r=a(this).closest("form"),l=r.serializeArray();a.each(l,function(){e[this.name]=this.value})}else n=a(this).data("key"),i=a(this).data("value"),e[n]=i;if(i||void 0===e[n]||delete e[n],"type"==n?(e=JSON.parse(JSON.stringify(d)),e.type=a(this).data("value"),s.find("ul.tab li").removeClass("is-active"),s.find("ul.tab li:first-child").addClass("is-active")):e.type=s.find(".post-type-tabs .is-active a").data("value"),"_term_category"==n){var c="_term_post_tag";delete e[c]}else if(n.indexOf("_cat")>0){c=n.replace("_cat","_tag");delete e[c]}var _=a(this);return a.ajax({url:wnd_posts_api,type:"GET",data:e,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",wnd.rest_nonce),wnd_loading(e.wnd_ajax_container,!0)},success:function(t){if(wnd_loading(e.wnd_ajax_container,!1),"type"==n){s.find(".taxonomy-tabs").addClass("is-hidden");for(var i=0;i<t.data.taxonomies.length;i++)s.find("."+t.data.taxonomies[i]+"-tabs").removeClass("is-hidden")}a(e.wnd_ajax_container).html(t.data.posts+t.data.pagination);var d=s.children(".main-category-tabs");d&&t.data.category_tabs&&0==s.find("."+t.data.category_taxonomy+"-tabs").length&&(d.last().after(t.data.category_tabs),d.remove());var o=s.children(".related-tags");for(taxonomy in o&&t.data.related_tags_tabs?(o.after(t.data.related_tags_tabs),o.remove()):o.addClass("is-hidden"),s.children(".sub-tabs").remove(),t.data.sub_taxonomy_tabs)s.children("."+taxonomy+"-tabs:last").after(t.data.sub_taxonomy_tabs[taxonomy])},error:function(){wnd_alert_msg(wnd.msg.system_error),_.parent("li").removeClass("is-active")}}),!1});var s={};a("body").on("click",".ajax-filter-user a,.ajax-filter-user form button",function(){var t=a(this).closest(".ajax-filter-user").attr("ID").split("-")[1],e=a("#tabs-"+t),n="",i="",d=e.data();s=Object.assign(s,d);var o=a(this).closest(".pagination-list").length>0;if(o||delete s.page,"BUTTON"==a(this).get(0).tagName){var r=a(this).closest("form"),l=r.serializeArray();a.each(l,function(){s[this.name]=this.value})}else n=a(this).data("key"),i=a(this).data("value"),s[n]=i;i||void 0===s[n]||delete s[n];var c=a(this);return a.ajax({url:wnd_users_api,type:"GET",data:s,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",wnd.rest_nonce),wnd_loading(s.wnd_ajax_container,!0)},success:function(t){wnd_loading(s.wnd_ajax_container,!1),a(s.wnd_ajax_container).html(t.data.users+t.data.pagination)},error:function(){wnd_alert_msg(wnd.msg.system_error),c.parent("li").removeClass("is-active")}}),!1}),a("body").on("change","select.dynamic-sub",function(){var t=a(this).prop("name");t=t.split("_term_")[1],t=t.split("[]")[0];var e=a(this).val(),s=a(this).data("child_level"),n=a("."+t+"-child-"+(s+1)),i=n.data("tips")||"";0==s&&(a(".dynamic-sub-"+t).each(function(){a(this).html('<option value="-1">- '+a(this).data("tips")+" -</option>"),a(this).removeClass("is-active")}),a(".dynamic-sub-"+t).prop("disabled",!1)),-1!=e?a.ajax({type:"get",url:wnd_jsonget_api,data:{data:"wnd_sub_terms",param:{parent:e,taxonomy:t,tips:i}},success:function(e){e.data?(n.html(e.data),n.addClass("is-active"),a(".dynamic-sub-"+t).each(function(){a(this).data("child_level")>s&&a(this).prop("disabled",!1)})):a(".dynamic-sub-"+t).each(function(){a(this).data("child_level")>s&&a(this).prop("disabled",!0)})}}):n.html('<option value="-1">- '+n.data("tips")+" -</option>")}),a("body").on("click","form .add-row",function(){var t=a(this).closest(".field");a(this).removeClass("add-row"),a(this).addClass("remove-row"),a(this).text("-");var e=t[0].outerHTML;a(this).addClass("add-row"),a(this).removeClass("remove-row"),a(this).text("+"),t.after(e)}),a("body").on("click","form .remove-row",function(){a(this).closest(".field").remove()}),a("body").on("change","form",function(){var t=a(this).find("[type='submit']");t.prop("disabled",!1),t.text(t.data("text"))}),a("body").on("click",".gallery img",function(){a(this).closest(".gallery").find("img");var t='<img src="'+a(this).data("url")+'" />';wnd_alert_modal(t,!0)}),a("body").on("click","#modal .modal-background,#modal .modal-close",function(){a(this).closest("#modal").remove()}),a("body").on("click",".notification .delete",function(){a(this).closest(".notification").slideUp()})});