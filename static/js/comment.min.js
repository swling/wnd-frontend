document.addEventListener("submit",function(e){function t(e,t){wnd_alert_msg(`<div class="has-text-centered"><p class="ajax-comment-message">${e}</p></div>`,t)}let a=e.target;if("commentform"!=a.id)return;e.preventDefault();let n="comment-list",l=document.querySelector("."+n),r=a.closest("#respond"),d=a.querySelector("#comment_parent").value,s=a.querySelector("[type='submit']"),c=new FormData(a);t(wnd.msg.waiting+"...."),s.disabled=!0,axios({method:a.getAttribute("method"),url:wnd.rest_url+wnd.comment.api,data:c}).then(e=>{let c=a.querySelector("[name='captcha']");if(c&&(c.value=""),0==e.data.status)return t(e.data.msg),void(s.disabled=!1);if(0!=d)r.insertAdjacentHTML("beforebegin",`<ul class="children">${e.data.data}</ul>`);else if(l){let t="desc"==wnd.comment.order?"afterbegin":"beforeend";l.insertAdjacentHTML(t,e.data.data)}else{let t="top"==wnd.comment.form_pos?"beforeend":"beforebegin";r.insertAdjacentHTML(t,`<ol class="${n}">${e.data.data}</ol>`)}t(wnd.msg.submit_successfully,1),a.querySelector("textarea").value="",s.disabled=!1,reply_link=r.querySelector("#cancel-comment-reply-link"),reply_link&&reply_link.click()}).catch(e=>{console.log(e),s.disabled=!1})});